---
description: WordPress push/verify workflow for content pages
alwaysApply: false
---

# WordPress Content Workflow

This rule documents the workflow for pushing content to WordPress and verifying it.

---

## Source of Truth

**HTML files in `content/tools/` are the source of truth.** These files contain the content that gets pushed to WordPress.

- File format: `.html` with YAML frontmatter
- Location: `content/tools/{slug}.html`
- Template: `content/tools/_template.html`

---

## Pushing Content to WordPress

### Single Page Push

```bash
python scripts/wp_pages.py push --file content/tools/{slug}.html
```

### Push All Pages

```bash
python scripts/wp_pages.py push-all
```

This command:

- Pushes all `.html` files in `content/tools/` (excluding `_template.html`)
- Has built-in retry logic for 503/429 errors (exponential backoff)
- Adds 1-second delay between requests to be nice to the server
- Reports success/failure summary at the end

---

## Verifying Pages After Push

**IMPORTANT:** After pushing content to WordPress, ALWAYS verify the pages using the MCP browser tools.

### Verification Steps

1. **Navigate to the page:**

```
CallMcpTool: cursor-browser-extension / browser_navigate
Arguments: {"url": "https://www.ai-buzz.com/{slug}"}
```

2. **Take a snapshot to verify content:**

```
CallMcpTool: cursor-browser-extension / browser_snapshot
Arguments: {}
```

3. **Check for:**
   - Page title matches expected
   - Headings render correctly (H1, H2, H3)
   - Tables render properly (not as raw markdown)
   - Code blocks render with proper formatting
   - Widget embeds load (check for tool containers)
   - Links point to correct URLs
   - No broken HTML or markdown showing as raw text

4. **For visual verification (optional):**

```
CallMcpTool: cursor-browser-extension / browser_take_screenshot
Arguments: {"fullPage": true}
```

### What to Check

| Element     | What to Verify                              |
| ----------- | ------------------------------------------- |
| Title       | SEO title shows in browser tab              |
| H1          | Main heading renders correctly              |
| Tables      | Converted to HTML tables, not raw `\|...\|` |
| Code blocks | Wrapped in `<pre><code>`, syntax preserved  |
| Script tags | Widget loads, not shown as text             |
| Links       | Internal links work (not 404)               |
| FAQ         | Proper H3 headings, paragraphs              |

### Common Issues

**Tables showing as raw markdown:**

- The `wp_pages.py` script now converts markdown tables to HTML
- If still broken, check for malformed table syntax (must start and end with `|`)

**Script tags wrapped in paragraphs:**

- Fixed in `wp_pages.py` - HTML tags now pass through unchanged
- If still broken, ensure script tag is on its own line

**Code blocks not formatting:**

- Must use triple backticks with language: ` ```python ... ``` `
- Script converts to `<pre><code class="language-python">`

---

## Workflow Summary

When content is updated:

1. **Edit** the HTML file in `content/tools/`
2. **Push** using `push` or `push-all` command
3. **Verify** using MCP browser tools
4. **Fix** any rendering issues and re-push if needed

---

## Commands Reference

| Command                          | Description                           |
| -------------------------------- | ------------------------------------- |
| `wp_pages.py list`               | List all WordPress pages              |
| `wp_pages.py push --file FILE`   | Push single file                      |
| `wp_pages.py push-all`           | Push all content files                |
| `wp_pages.py pull --slug SLUG`   | Pull page to local HTML file          |
| `wp_pages.py diff --slug SLUG`   | Compare local vs remote               |
| `wp_pages.py verify --slug SLUG` | Take screenshot (requires playwright) |
