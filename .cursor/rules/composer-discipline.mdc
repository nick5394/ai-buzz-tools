---
description: Strict completion and testing requirements for implementation agents
alwaysApply: true
---

# Implementation Discipline

These rules ensure complete, tested, and scoped implementations.

---

## COMPLETION REQUIREMENTS

Before ending your response, you MUST verify:

1. **ALL todos from any plan are addressed**
   - Check each todo explicitly
   - Mark completed or explain why not possible

2. **No deferred work**
   - No "I'll handle this later"
   - No "In a future session we could..."
   - Do it now or explain why it cannot be done

3. **Explicit status report**
   - List what was completed
   - List what remains (if anything) and why

---

## TESTING REQUIREMENTS

After modifying files in `api/`, `data/`, `widgets/`, or `tests/`:

1. **Run tests:**

   ```bash
   pytest tests/test_{tool}.py -v
   ```

2. **If tests FAIL:**
   - Fix them before moving on
   - Do not leave failing tests

3. **Report results:**
   - Include test output in your response
   - Confirm all tests pass

---

## VERIFICATION GATES

Before marking ANY task complete:

1. **READ** the modified file to confirm changes are correct
2. **RUN** relevant tests
3. **CHECK** for linter errors using ReadLints tool

Do not skip these steps.

---

## NO PARTIAL IMPLEMENTATIONS

If you start a change, you MUST:

- **Complete the full change** — No half-finished features
- **Update tests** if behavior changed
- **Update docs** if API changed

Incomplete work is not acceptable.

---

## SCOPE DISCIPLINE

Only implement what was explicitly requested:

- If the user asked for X, implement X — not X + Y + Z
- If you think Y would be useful, ASK first: "Should I also add Y?"
- If something is out of scope, note it but don't implement it

**"Nice to have" is not in scope unless the user says so.**

---

## NO ROOT FILE CREATION

NEVER create new files in the root directory.

**Allowed locations:**

- `tests/` — Test files
- `scripts/` — Utility scripts
- `docs/` — Documentation

If you need a file elsewhere, ASK FIRST.

---

## DECISION-MAKING

When multiple valid approaches exist:

- Evaluate all options against project principles
- Choose the best option without asking
- Document the reasoning briefly in your response

Do NOT ask clarifying questions unless:

- The request is genuinely ambiguous with no clear best option
- The decision has significant irreversible consequences
- Information is missing that cannot be reasonably inferred

---

## Examples

**Bad behavior:**

- "I'll add tests in the next session"
- "I also added a helper function that might be useful later"
- Creating `SUMMARY.md` in root directory
- Leaving a failing test "to fix later"
- Asking "Which approach should I use?" when one is clearly better

**Good behavior:**

- "All 5 todos completed. Tests pass. Here's the summary..."
- "I noticed we could also add X, but that's out of scope. Want me to add it?"
- "Tests failed on line 42. Fixed by updating the expected value. All tests now pass."
- "Evaluated 3 options; chose X because it aligns with 'simple over features' principle."
